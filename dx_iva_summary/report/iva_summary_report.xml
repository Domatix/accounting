<?xml version="1.0" encoding="utf-8"?>
<openerp>
    <data>
        <template id="dx_iva_summary.report_iva_summary" name="Resumen de liquidación de iva">
            <t t-call="report.html_container">
                <t t-foreach="docs" t-as="o">
                    <t t-call="report.external_layout">
                        <div class="page">
                            <t t-set="totalbaseR" t-value="0"/>
                            <t t-set="totalcuotaR" t-value="0"/>
                            <t t-set="totalR" t-value="0"/>
                            <t t-set="totalbaseS" t-value="0"/>
                            <t t-set="totalcuotaS" t-value="0"/>
                            <t t-set="totalS" t-value="0"/>
                            <t t-set="totalbaseT" t-value="0"/>
                            <t t-set="totalbaseO" t-value="0"/>
                            <t t-set="totalcuotaT" t-value="0"/>
                            <t t-set="totalcuotaO" t-value="0"/>
                            <t t-set="totalT" t-value="0"/>
                            <t t-set="totalO" t-value="0"/>
                            <br/>
                            <div class="row mt32 mb32">
                                <div class="col-xs-6">
                                    <strong>Chart of Tax:</strong>
                                    <p t-esc="o['chart_tax_id'].name"/>
                                </div>
                                <div class="col-xs-3">
                                    <strong>Fiscal Year:</strong>
                                    <p t-esc="o['fiscalyear_id'].name"/>
                                </div>
                                <div class="col-xs-3">
                                    <strong>Periods:</strong>
                                    <p>
                                        Start Period:
                                        <span t-esc="o['period_from'].name"/><br/>
                                        End Period:
                                        <span t-esc="o['period_to'].name"/>
                                    </p>
                                </div>
                            </div>
                            <h1>Listado de liquidación de IVA</h1>
                            <table class="table table-condensed" style="page-break-inside: avoid;">
                                <div>
                                <thead>
                                    <th colspan='4'>IVA REPERCUTIDO</th>
                                    <tr style="font-size:14px; border-top: hidden;">
                                        <th width="30%">Nombre</th>
                                        <th class="text-right">Base</th>
                                        <th class="text-right">Cuota</th>
                                        <th class="text-right">Total</th>
                                    </tr>
                                </thead>
                                <tbody style="font-size:10px;">
                                    <t t-foreach="get_data('purchase')" t-as="g">
                                        <tr>
                                            <td class="text-left"><span t-esc="g['name']"/></td>
                                            <td class="text-right" ><span t-esc="'{0:,.2f}'.format(g['base']).replace('.','%temp%').replace(',','.').replace('%temp%',',')"/></td>
                                            <td class="text-right" ><span t-esc="'{0:,.2f}'.format(g['cuota']).replace('.','%temp%').replace(',','.').replace('%temp%',',')"/></td>
                                            <td class="text-right" ><span t-esc="'{0:,.2f}'.format(g['total']).replace('.','%temp%').replace(',','.').replace('%temp%',',')"/></td>
                                            <t t-set="totalbaseR" t-value="totalbaseR+g['base']"/>
                                            <t t-set="totalcuotaR" t-value="totalcuotaR+g['cuota']"/>
                                            <t t-set="totalR" t-value="totalR+g['total']"/>
                                        </tr>
                                    </t>
                                    <tr style='font-weight:bold'>
                                        <td colspan="2" class="text-right"><span t-esc="'{0:,.2f}'.format(totalbaseR).replace('.','%temp%').replace(',','.').replace('%temp%',',')"/></td>
                                        <td class="text-right"><span t-esc="'{0:,.2f}'.format(totalcuotaR).replace('.','%temp%').replace(',','.').replace('%temp%',',')"/></td>
                                        <td class="text-right"><span t-esc="'{0:,.2f}'.format(totalR).replace('.','%temp%').replace(',','.').replace('%temp%',',')"/></td>
                                    </tr>
                                </tbody>
                              </div>
                              </table>
                              <table class="table table-condensed" style="page-break-inside: avoid;">
                              <div>
                                <thead>
                                    <th colspan='4'>IVA SOPORTADO</th>
                                    <tr style="font-size:14px; border-top: hidden;">
                                        <th width="30%">Nombre</th>
                                        <th class="text-right">Base</th>
                                        <th class="text-right">Cuota</th>
                                        <th class="text-right">Total</th>
                                    </tr>
                                </thead>
                                <t t-set="totalbaseS" t-value="0"/>
                                <t t-set="totalcuotaS" t-value="0"/>
                                <t t-set="totalS" t-value="0"/>
                                <tbody style="font-size:10px;">
                                    <t t-foreach="get_data('sale')" t-as="g">
                                        <tr>
                                            <td class="text-left"><span t-esc="g['name']"/></td>
                                            <td class="text-right"><span t-esc="'{0:,.2f}'.format(g['base']).replace('.','%temp%').replace(',','.').replace('%temp%',',')"/></td>
                                            <td class="text-right"><span t-esc="'{0:,.2f}'.format(g['cuota']).replace('.','%temp%').replace(',','.').replace('%temp%',',')"/></td>
                                            <td class="text-right"><span t-esc="'{0:,.2f}'.format(g['total']).replace('.','%temp%').replace(',','.').replace('%temp%',',')"/></td>
                                            <t t-set="totalbaseS" t-value="totalbaseS+g['base']"/>
                                            <t t-set="totalcuotaS" t-value="totalcuotaS+g['cuota']"/>
                                            <t t-set="totalS" t-value="totalS+g['total']"/>
                                        </tr>
                                    </t>
                                    <tr style='font-weight:bold'>
                                        <td colspan="2" class="text-right"  t-esc="'{0:,.2f}'.format(totalbaseS).replace('.','%temp%').replace(',','.').replace('%temp%',',')"></td>
                                        <td class="text-right"  t-esc="'{0:,.2f}'.format(totalcuotaS).replace('.','%temp%').replace(',','.').replace('%temp%',',')"></td>
                                        <td class="text-right"  t-esc="'{0:,.2f}'.format(totalS).replace('.','%temp%').replace(',','.').replace('%temp%',',')"></td>
                                    </tr>
                                </tbody>
                              </div>
                            </table>
                            <table class="table table-condensed" style="page-break-inside: avoid;">
                                <div>
                                <thead>
                                    <!-- <span style='font-weight:bold'>OTROS IMPUESTOS</span> -->
                                    <th colspan='4'>RETENCIONES</th>
                                    <tr style="font-size:14px; border-top: hidden;">
                                        <th width="30%">Nombre</th>
                                        <th class="text-right">Base</th>
                                        <th class="text-right">Cuota</th>
                                        <th class="text-right">Total</th>
                                    </tr>
                                </thead>
                                <tbody style="font-size:10px;">
                                    <t t-foreach="get_data('retenciones')" t-as="g">
                                        <tr>
                                            <td class="text-left"><span t-esc="g['name']"/></td>
                                            <td class="text-right" ><span t-esc="'{0:,.2f}'.format(g['base']).replace('.','%temp%').replace(',','.').replace('%temp%',',')"/></td>
                                            <td class="text-right" ><span t-esc="'{0:,.2f}'.format(g['cuota']).replace('.','%temp%').replace(',','.').replace('%temp%',',')"/></td>
                                            <td class="text-right" ><span t-esc="'{0:,.2f}'.format(g['total']).replace('.','%temp%').replace(',','.').replace('%temp%',',')"/></td>
                                            <t t-set="totalbaseT" t-value="totalbaseT+g['base']"/>
                                            <t t-set="totalcuotaT" t-value="totalcuotaT+g['cuota']"/>
                                            <t t-set="totalT" t-value="totalT+g['total']"/>
                                        </tr>
                                    </t>
                                    <tr style='font-weight:bold'>
                                        <td colspan="2" class="text-right"><span t-esc="'{0:,.2f}'.format(totalbaseT).replace('.','%temp%').replace(',','.').replace('%temp%',',')"/></td>
                                        <td class="text-right"><span t-esc="'{0:,.2f}'.format(totalcuotaT).replace('.','%temp%').replace(',','.').replace('%temp%',',')"/></td>
                                        <td class="text-right"><span t-esc="'{0:,.2f}'.format(totalT).replace('.','%temp%').replace(',','.').replace('%temp%',',')"/></td>
                                    </tr>
                                </tbody>
                              </div>
                            </table>
                              <table class="table table-condensed" style="page-break-inside: avoid;">
                                <div>
                                <thead>
                                    <!-- <span style='font-weight:bold'>OTROS IMPUESTOS</span> -->
                                    <th colspan='4'>OTROS IMPUESTOS</th>
                                    <tr style="font-size:14px; border-top: hidden;">
                                        <th width="30%">Nombre</th>
                                        <th class="text-right">Base</th>
                                        <th class="text-right">Cuota</th>
                                        <th class="text-right">Total</th>
                                    </tr>
                                </thead>
                                <tbody style="font-size:10px;">
                                    <t t-foreach="get_data('other')" t-as="g">
                                        <tr>
                                            <td class="text-left"><span t-esc="g['name']"/></td>
                                            <td class="text-right" ><span t-esc="'{0:,.2f}'.format(g['base']).replace('.','%temp%').replace(',','.').replace('%temp%',',')"/></td>
                                            <td class="text-right" ><span t-esc="'{0:,.2f}'.format(g['cuota']).replace('.','%temp%').replace(',','.').replace('%temp%',',')"/></td>
                                            <td class="text-right" ><span t-esc="'{0:,.2f}'.format(g['total']).replace('.','%temp%').replace(',','.').replace('%temp%',',')"/></td>
                                            <t t-set="totalbaseO" t-value="totalbaseO+g['base']"/>
                                            <t t-set="totalcuotaO" t-value="totalcuotaO+g['cuota']"/>
                                            <t t-set="totalO" t-value="totalO+g['total']"/>
                                        </tr>
                                    </t>
                                    <tr style='font-weight:bold'>
                                        <td colspan="2" class="text-right"><span t-esc="'{0:,.2f}'.format(totalbaseO).replace('.','%temp%').replace(',','.').replace('%temp%',',')"/></td>
                                        <td class="text-right"><span t-esc="'{0:,.2f}'.format(totalcuotaO).replace('.','%temp%').replace(',','.').replace('%temp%',',')"/></td>
                                        <td class="text-right"><span t-esc="'{0:,.2f}'.format(totalO).replace('.','%temp%').replace(',','.').replace('%temp%',',')"/></td>
                                    </tr>
                                </tbody>
                              </div>
                              </table>
                        </div>
                    </t>
                </t>
            </t>
        </template>
        <report id="report_summary_iva" string="IVA summary" model="account.invoice" report_type="qweb-pdf" name="dx_iva_summary.report_iva_summary" file="dx_iva_summary.report_iva_summary" menu="False"/>
    </data>
</openerp>
