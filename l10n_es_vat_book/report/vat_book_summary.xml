<?xml version="1.0" encoding="utf-8"?>
<openerp>
  <data>
    <template id="report_vat_book_summary_document">
      <t t-call="report.html_container">
        <div class="page">
          <style type="text/css">

            .td_detail_table {
              padding-right: 5%;
            }

          </style>
          <div class="row">

            <!-- TITLE -->
            <div class="col-xs-12 text-center" id="title">
              <h3>Vat Book summary</h3>
            </div>

            <!-- HEADER -->
            <div class="col-xs-7" id="fiscal_periods_div" style="float: left">
              <table class="detail_table" id="fiscal_periods_table">
                <tbody class="invoice_tbody">
                  <tr>
                    <td width="30%" class="text-right td_detail_table">
                      <strong>Company:</strong>
                    </td>
                    <td width="70%" class="td_detail_table">
                      <span t-field=" o.company_id"/>
                    </td>
                  </tr>
                  <tr>
                    <td width="30%" class="text-right td_detail_table">
                      <strong>Fiscal Year:</strong>
                    </td>
                    <td width="70%" class="td_detail_table">
                      <span t-field=" o.fiscalyear_id"/>
                    </td>
                  </tr>
                  <tr>
                    <td width="30%" class="text-right td_detail_table">
                      <strong>Periods:</strong>
                    </td>
                    <td width="70%" class="td_detail_table">
                      <t t-foreach="o.periods" t-as="period">
                        <span t-field="period.name"/>
                      </t>
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>

            <div class="col-xs-5" id="vat_book_contact_div" style="float: right">
              <table class="detail_table" id="vat_book_contact_table">
                <tbody class="invoice_tbody">
                  <tr>
                    <td width="50%" class="text-right td_detail_table">
                      <strong>VAT:</strong>
                    </td>
                    <td width="50%" class="td_detail_table">
                      <span t-field="o.company_vat"/>
                    </td>
                  </tr>
                  <tr>
                    <td width="50%" class="text-right td_detail_table">
                      <strong>Contact phone:</strong>
                    </td>
                    <td width="50%" class="td_detail_table">
                      <span t-field="o.contact_phone"/>
                    </td>
                  </tr>
                  <tr>
                    <td width="50%" class="text-right td_detail_table">
                      <strong>Name contact:</strong>
                    </td>
                    <td width="50%" class="td_detail_table">
                      <span t-field="o.contact_name"/>
                    </td>
                  </tr>
                  <tr>
                    <td width="50%" class="text-right td_detail_table">
                      <strong>Calculation Date:</strong>
                    </td>
                    <td width="50%" class="td_detail_table">
                      <span t-field="o.calculation_date"/>
                    </td>
                  </tr>

                </tbody>
              </table>
            </div>
            <br/>
            <br/>

            <!-- INVOICE ISSUED -->
            <div class="col-xs-12" id="title_sumary_invoices">
              <h4>
                <strong>Summary invoices issued</strong>
              </h4>
            </div>
            <div class="col-xs-12" id="div_sumary_invoices" style="margin-top: 10px">
              <table class="table table-condensed" id="table_sumary_invoices">
                <thead>
                  <tr>
                    <td width="40%" style="text-align: center; vertical-align: middle" id="sumary_code">
                      <strong>Code</strong>
                    </td>
                    <td width="15%" style="text-align: center; vertical-align: middle" id="sumary_base">
                      <strong>Base</strong>
                    </td>
                    <td width="15%" style="text-align: center; vertical-align: middle" id="sumary_type">
                      <strong>Type</strong>
                    </td>
                    <td width="15%" style="text-align: center; vertical-align: middle" id="sumary_cuote">
                      <strong>Cuote</strong>
                    </td>

                    <td width="15%" style="text-align: center; vertical-align: middle">
                      <strong>Total</strong>
                    </td>
                  </tr>
                </thead>
                <tbody>
                  <tr t-foreach="o.issued_tax_summary" t-as="s">
                    <td class="text-center" id="data_sumary_code1">
                      <span t-field="s.tax_code_id.name"/>
                    </td>
                    <td class="text-center" id="data_sumary_base1" style="text-align: right">
                      <span t-esc="'{0:,.2f}'.format(s.sum_base_amount).replace(',', ' ').replace('.', ',').replace(' ', '.') or '0'"/>
                    </td>
                    <td class="text-center" id="data_sumary_type1" style="text-align: right">
                      <span t-esc="s.tax_percent * 100 or '0'"/>
                    </td>
                    <td class="text-center" id="data_sumary_cuote1" style="text-align: right">
                      <span t-esc="'{0:,.2f}'.format(s.sum_tax_amount).replace(',', ' ').replace('.', ',').replace(' ', '.') or '0'"/>
                    </td>

                    <td class="text-center" style="text-align: right">
                      <span t-esc="'{0:,.2f}'.format(s.sum_tax_amount + s.sum_base_amount).replace(',', ' ').replace('.', ',').replace(' ', '.') or '0'"/>
                    </td>
                  </tr>
                  <tr id="total_sumary">
                    <td class="text-right" id="total_sumary_code1">
                      <strong>Total</strong>
                    </td>
                    <td class="text-center" id="total_sumary_base1" style="text-align: right">
                      <strong><span t-esc="'{0:,.2f}'.format(o.amount_without_tax_issued).replace(',', ' ').replace('.', ',').replace(' ', '.') or '0'"/></strong>
                    </td>
                    <td class="text-center" id="total_sumary_cuote1" style="text-align: right"></td>
                    <td style="text-align: right">
                      <strong><span t-esc="'{0:,.2f}'.format(o.amount_tax_issued).replace(',', ' ').replace('.', ',').replace(' ', '.') or '0'"/></strong>
                    </td>
                    <td class="text-center" id="total_sumary_type1" style="text-align: right">
                      <strong><span t-esc="'{0:,.2f}'.format(o.amount_total_issued).replace(',', ' ').replace('.', ',').replace(' ', '.') or '0'"/></strong>
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>

            <!-- INVOICES RECIVED -->

            <div class="col-xs-12" id="title_sumary_invoices">
              <h4>
                <strong>Summary invoices received</strong>
              </h4>
            </div>
            <div class="col-xs-12" id="div_sumary_invoices">
              <table class="table table-condensed" id="table_sumary_invoices">
                <thead>
                  <tr>
                    <td width="40%" class="text-center" style="text-align: center" id="sumary_code">
                      <strong>Code</strong>
                    </td>
                    <td width="15%" class="text-center" style="text-align: center" id="sumary_base">
                      <strong>Base</strong>
                    </td>
                    <td width="15%" class="text-center" style="text-align: center" id="sumary_type">
                      <strong>Type</strong>
                    </td>
                    <td width="15%" class="text-center" style="text-align: center" id="sumary_cuote">
                      <strong>Cuote</strong>
                    </td>

                    <td width="15%" class="text-center" style="text-align: center">
                      <strong>Total</strong>
                    </td>
                  </tr>
                </thead>
                <tbody>
                  <tr t-foreach="o.received_tax_summary" t-as="s">
                    <td class="text-center" id="data_sumary_code2">
                      <span t-field="s.tax_code_id.name"/>
                    </td>
                    <td class="text-center" id="data_sumary_base2" style="text-align: right">
                      <span t-esc="'{0:,.2f}'.format(s.sum_base_amount).replace(',', ' ').replace('.', ',').replace(' ', '.') or '0'"/>
                    </td>
                    <td class="text-center" id="data_sumary_type2" style="text-align: right">
                      <span t-esc="s.tax_percent * 100 or '0'"/>
                    </td>
                    <td class="text-center" id="data_sumary_cuote2" style="text-align: right">
                      <span t-esc="'{0:,.2f}'.format(s.sum_tax_amount).replace(',', ' ').replace('.', ',').replace(' ', '.') or '0'"/>
                    </td>

                    <td class="text-center" style="text-align: right">
                      <span t-esc="'{0:,.2f}'.format(s.sum_tax_amount + s.sum_base_amount).replace(',', ' ').replace('.', ',').replace(' ', '.') or '0'"/>
                    </td>
                  </tr>
                  <tr id="total_sumary">
                    <td class="text-right" id="total_sumary_code2">
                      <strong>Total</strong>
                    </td>
                    <td class="text-center" id="total_sumary_base2" style="text-align: right">
                      <strong><span t-esc="'{0:,.2f}'.format(o.amount_without_tax_received).replace(',', ' ').replace('.', ',').replace(' ', '.') or '0'"/></strong>
                    </td>
                    <td class="text-center" id="total_sumary_cuote2" style="text-align: right"></td>
                    <td style="text-align: right">
                      <strong><span t-esc="'{0:,.2f}'.format(o.amount_tax_received).replace(',', ' ').replace('.', ',').replace(' ', '.') or '0'"/></strong>
                    </td>
                    <td class="text-center" id="total_sumary_type2" style="text-align: right">
                      <strong><span t-esc="'{0:,.2f}'.format(o.amount_total_received).replace(',', ' ').replace('.', ',').replace(' ', '.') or '0'"/></strong>
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>

            <!-- RECTIFICATION ISSUED -->
            <div class="col-xs-12" id="title_sumary_invoices">
              <h4>
                <strong>Summary rectification Issued invoices</strong>
              </h4>
            </div>
            <div class="col-xs-12" id="div_sumary_invoices">
              <table class="table table-condensed" id="table_sumary_invoices">
                <thead>
                  <tr>
                    <td width="40%" class="text-center" style="text-align: center" id="sumary_code">
                      <strong>Code</strong>
                    </td>
                    <td width="15%" class="text-center" style="text-align: center" id="sumary_base">
                      <strong>Base</strong>
                    </td>
                    <td width="15%" class="text-center" style="text-align: center" id="sumary_type">
                      <strong>Type</strong>
                    </td>
                    <td width="15%" class="text-center" style="text-align: center" id="sumary_cuote">
                      <strong>Cuote</strong>
                    </td>

                    <td width="15%" class="text-center" style="text-align: center">
                      <strong>Total</strong>
                    </td>
                  </tr>
                </thead>
                <tbody>
                  <tr t-foreach="o.rectification_issued_tax_summary" t-as="s">
                    <td class="text-center" id="data_sumary_code3">
                      <span t-field="s.tax_code_id.name"/>
                    </td>
                    <td class="text-center" id="data_sumary_base3" style="text-align: right">
                      <span t-esc="'{0:,.2f}'.format(s.sum_base_amount).replace(',', ' ').replace('.', ',').replace(' ', '.') or '0'"/>
                    </td>
                    <td class="text-center" id="data_sumary_type3" style="text-align: right">
                      <span t-esc="s.tax_percent * 100 or '0'"/>
                    </td>
                    <td class="text-center" id="data_sumary_cuote3" style="text-align: right">
                      <span t-esc="'{0:,.2f}'.format(s.sum_tax_amount).replace(',', ' ').replace('.', ',').replace(' ', '.') or '0'"/>
                    </td>

                    <td class="text-center" style="text-align: right">
                      <span t-esc="'{0:,.2f}'.format(s.sum_tax_amount + s.sum_base_amount).replace(',', ' ').replace('.', ',').replace(' ', '.') or '0'"/>
                    </td>
                  </tr>
                  <tr id="total_sumary">
                    <td class="text-right" id="total_sumary_code3">
                      <strong>Total</strong>
                    </td>
                    <td class="text-center" id="total_sumary_base3" style="text-align: right">
                      <strong><span t-esc="'{0:,.2f}'.format(o.amount_without_tax_rectification_issued).replace(',', ' ').replace('.', ',').replace(' ', '.') or '0'"/></strong>
                    </td>
                    <td class="text-center" id="total_sumary_cuote3" style="text-align: right"></td>
                    <td style="text-align: right">
                      <strong><span t-esc="'{0:,.2f}'.format(o.amount_tax_rectification_issued).replace(',', ' ').replace('.', ',').replace(' ', '.') or '0'"/></strong>
                    </td>
                    <td class="text-center" id="total_sumary_type3" style="text-align: right">
                      <strong><span t-esc="'{0:,.2f}'.format(o.amount_total_rectification_issued).replace(',', ' ').replace('.', ',').replace(' ', '.') or '0'"/></strong>
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>

            <!-- RECTIFICATION RECIVED -->
            <div class="col-xs-12" id="title_sumary_invoices">
              <h4>
                <strong>Summary rectification Issued recived</strong>
              </h4>
            </div>
            <div class="col-xs-12" id="div_sumary_invoices">
              <table class="table table-condensed" id="table_sumary_invoices">
                <thead>
                  <tr>
                    <td width="40%" class="text-center" style="text-align: center" id="sumary_code">
                      <strong>Code</strong>
                    </td>
                    <td width="15%" class="text-center" style="text-align: center" id="sumary_base">
                      <strong>Base</strong>
                    </td>
                    <td width="15%" class="text-center" style="text-align: center" id="sumary_type">
                      <strong>Type</strong>
                    </td>
                    <td width="15%" class="text-center" style="text-align: center" id="sumary_cuote">
                      <strong>Cuote</strong>
                    </td>

                    <td width="15%" class="text-center" style="text-align: center">
                      <strong>Total</strong>
                    </td>
                  </tr>
                </thead>
                <tbody>
                  <tr t-foreach="o.rectification_received_tax_summary" t-as="s">
                    <td class="text-center" id="data_sumary_code4">
                      <span t-field="s.tax_code_id.name"/>
                    </td>
                    <td class="text-center" id="data_sumary_base4" style="text-align: right">
                      <span t-esc="'{0:,.2f}'.format(s.sum_base_amount).replace(',', ' ').replace('.', ',').replace(' ', '.') or '0'"/>
                    </td>
                    <td class="text-center" id="data_sumary_type4" style="text-align: right">
                      <span t-esc="s.tax_percent * 100 or '0'"/>
                    </td>
                    <td class="text-center" id="data_sumary_cuote4" style="text-align: right">
                      <span t-esc="'{0:,.2f}'.format(s.sum_tax_amount).replace(',', ' ').replace('.', ',').replace(' ', '.') or '0'"/>
                    </td>

                    <td class="text-center" style="text-align: right">
                      <span t-esc="'{0:,.2f}'.format(s.sum_tax_amount + s.sum_base_amount).replace(',', ' ').replace('.', ',').replace(' ', '.') or '0'"/>
                    </td>
                  </tr>
                  <tr id="total_sumary">
                    <td class="text-right" id="total_sumary_code">
                      <strong>Total</strong>
                    </td>
                    <td style="text-align: right" id="total_sumary_base4">
                      <strong><span t-esc="'{0:,.2f}'.format(o.amount_without_tax_rectification_received).replace(',', ' ').replace('.', ',').replace(' ', '.') or '0'"/></strong>
                    </td>
                    <td style="text-align: right" id="total_sumary_cuote4"></td>
                    <td style="text-align: right">
                      <strong><span t-esc="'{0:,.2f}'.format(o.amount_tax_rectification_received).replace(',', ' ').replace('.', ',').replace(' ', '.') or '0'"/></strong>
                    </td>
                    <td class="text-center" id="total_sumary_type4" style="text-align: right">
                      <strong><span t-esc="'{0:,.2f}'.format(o.amount_total_rectification_received).replace(',', ' ').replace('.', ',').replace(' ', '.') or '0'"/></strong>
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>

          </div>
        </div>
        <!-- Close div page -->

        <!-- </t>
        </t> -->
      </t>
    </template>

    <template id="tmp_report_vat_book_summary">
      <t t-call="report.html_container">
        <t t-foreach="doc_ids" t-as="doc_id">
          <t t-raw="translate_doc(doc_id, doc_model, 'company_id.partner_id.lang', 'l10n_es_vat_book.report_vat_book_summary_document')"/>
        </t>
      </t>
    </template>

    <!-- <record id="report_vat_book_summary" model="ir.actions.report.xml">
      <field name="paperformat_id"></field>
      <field name="orientation">Portrait</field>
      <field name="margin_top">150</field>

    </record> -->

    <record id="paperformat_lowmargin" model="report.paperformat">
      <field name="name">European A4 low margin</field>
      <field name="default" eval="True"/>
      <field name="format">A4</field>
      <field name="page_height">0</field>
      <field name="page_width">0</field>
      <field name="orientation">Portrait</field>
      <field name="margin_top">10</field>
      <field name="margin_bottom">4</field>
      <field name="margin_left">10</field>
      <field name="margin_right">10</field>
      <field name="header_line" eval="False"/>
      <field name="header_spacing">0</field>
      <field name="dpi">90</field>
    </record>

    <record id="l10n_es_vat_book.report_vat_book_summary" model="ir.actions.report.xml">
      <field name="paperformat_id" ref="l10n_es_vat_book.paperformat_lowmargin"/>
    </record>

  </data>
</openerp>
